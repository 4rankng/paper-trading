# Signal Weights Configuration for Technical Analysis Aggregation
# Weights are applied per market regime to adjust signal importance

# Category weights per regime (must sum to 1.0)
regimes:
  trending_up:
    description: "Strong uptrend - ADX > 25, price above MA20/50/200"
    momentum: 0.30
    trend: 0.35
    volatility: 0.10
    volume: 0.15
    ob_os: 0.10

  trending_down:
    description: "Strong downtrend - ADX > 25, price below MA20/50/200"
    momentum: 0.30
    trend: 0.35
    volatility: 0.15
    volume: 0.10
    ob_os: 0.10

  ranging:
    description: "Sideways/consolidation - ADX < 20, price oscillating around MAs"
    momentum: 0.20
    trend: 0.10
    volatility: 0.25
    volume: 0.20
    ob_os: 0.25

  volatile:
    description: "High volatility - ATR > 2% of price, wide swings"
    momentum: 0.15
    trend: 0.15
    volatility: 0.30
    volume: 0.25
    ob_os: 0.15

# Individual signal scoring rules
# Scores range from -1 (strongly bearish) to +1 (strongly bullish)
signals:
  # === MOMENTUM SIGNALS ===
  rsi:
    category: momentum
    overbought_threshold: 70
    oversold_threshold: 30
    # In ranging markets, extreme RSI is more significant
    ranging_weight: 1.5

  macd:
    category: momentum
    bullish_above: 0  # histogram > 0
    bearish_below: 0  # histogram < 0
    # More weight in trending markets
    trending_weight: 1.3

  stochastic:
    category: momentum
    overbought_threshold: 80
    oversold_threshold: 20

  willr:
    category: momentum
    overbought_threshold: -20
    oversold_threshold: -80

  cci:
    category: momentum
    overbought_threshold: 100
    oversold_threshold: -100

  mfi:
    category: momentum
    overbought_threshold: 80
    oversold_threshold: 20

  momentum:
    category: momentum
    period: 10

  roc:
    category: momentum
    period: 10

  rocr:
    category: momentum
    period: 10

  ppo:
    category: momentum
    bullish_above: 0

  apo:
    category: momentum
    bullish_above: 0

  trix:
    category: momentum
    bullish_above: 0

  # === TREND SIGNALS ===
  adx:
    category: trend
    strong_trend_threshold: 25
    weak_trend_threshold: 20
    # High ADX confirms trend strength
    strong_weight: 1.2

  aroon:
    category: trend
    bullish_threshold: 50  # aroon_up > 50
    bearish_threshold: -50  # aroon_oscillator < -50

  aroonosc:
    category: trend
    strong_bullish: 50
    strong_bearish: -50

  plus_di:
    category: trend
    # Higher than minus_di is bullish

  minus_di:
    category: trend
    # Higher than plus_di is bearish

  dx:
    category: trend
    # Higher values indicate stronger trend

  price_vs_ma20:
    category: trend
    # Price above MA20 is bullish

  price_vs_ma50:
    category: trend
    # Price above MA50 is bullish

  price_vs_ma200:
    category: trend
    # Price above MA200 is bullish

  ma_cross:
    category: trend
    # MA20 > MA50 > MA200 is bullish

  ma_slope_short:
    category: trend
    period: 20
    # Rising slope is bullish

  ma_slope_long:
    category: trend
    period: 50
    # Rising slope is bullish

  parabolic_sar:
    category: trend
    # Price above SAR is bullish

  trendline_slope:
    category: trend
    period: 50
    # Positive slope is bullish

  trendline_r2:
    category: trend
    # Higher RÂ² indicates more reliable trend

  # === VOLATILITY SIGNALS ===
  atr:
    category: volatility
    period: 14
    # Relative to price - high ATR = high volatility

  natr:
    category: volatility
    period: 14
    # Normalized ATR as percentage

  bollinger_bandwidth:
    category: volatility
    period: 20
    narrow_threshold: 0.02  # Potential squeeze
    wide_threshold: 0.08    # High volatility

  bollinger_position:
    category: volatility
    # Price near upper band = overbought
    # Price near lower band = oversold

  volatility_std_30d:
    category: volatility
    # 30-day standard deviation of returns

  # === VOLUME SIGNALS ===
  volume_ratio:
    category: volume
    period: 20
    high_threshold: 1.5   # Above average volume
    low_threshold: 0.7    # Below average volume

  volume_trend:
    category: volume
    period: 20
    # Increasing volume trend

  obv:
    category: volume
    # Rising OBV is bullish

  obv_trend:
    category: volume
    # OBV trend direction

  ad:
    category: volume
    # Accumulation/Distribution line

  adosc:
    category: volume
    # Chaikin A/D Oscillator

  price_volume_correlation:
    category: volume
    # Positive correlation = confirms trend

  # === OVERBOUGHT/OVERSOLD SIGNALS ===
  bollinger_position_obos:
    category: ob_os
    # Position within Bollinger Bands

  stoch_k:
    category: ob_os
    overbought: 80
    oversold: 20

  ultimate_oscillator:
    category: ob_os
    overbought: 70
    oversold: 30

  # 52-week range position
  week52_range:
    category: ob_os
    near_high_threshold: 90  # Within 10% of 52-week high
    near_low_threshold: 10   # Within 10% of 52-week low

# Score aggregation rules
aggregation:
  # How to combine individual signal scores into category scores
  method: weighted_average  # Options: weighted_average, median, max_aligned

  # Minimum number of signals required per category for valid score
  min_signals_per_category: 2

  # How to handle missing signals
  missing_signals: ignore  # Options: ignore, neutral, penalize

  # Convergence thresholds for cross-confirmation
  convergence:
    high: 0.70     # 70%+ of signals aligned
    medium: 0.50   # 50%+ of signals aligned
    low: 0.30      # Less than 50% aligned

# Confidence level definitions
confidence:
  high:
    description: "Multiple signal categories aligned, strong convergence"
    min_convergence: 0.65
    min_categories: 3

  medium:
    description: "Some signal alignment, moderate convergence"
    min_convergence: 0.45
    min_categories: 2

  low:
    description: "Mixed signals, low convergence"
    min_convergence: 0.0
    min_categories: 1

# Classification thresholds
classification:
  overall_score:
    strongly_bullish: 75
    moderately_bullish: 60
    neutral: 45
    moderately_bearish: 30
    strongly_bearish: 0

  category_score:
    bullish: 65
    neutral_bullish: 55
    neutral: 45
    neutral_bearish: 35
    bearish: 25
