# TermAI Explorer

A terminal-inspired AI webapp built with Next.js 14, featuring Claude API integration, persistent sessions, and data visualization capabilities.

## Features

- **Retro Terminal UI**: Green-on-black theme with authentic terminal feel
- **Claude API Integration**: Real-time streaming responses from Claude
- **Persistent Sessions**: Conversation history stored in `filedb/webapp/`
- **RAG System**: Context-aware responses using conversation memory
- **Data Visualization**: Charts, tables, and pie charts generated by AI
- **Mobile-Friendly**: Responsive design with accessibility support

## Quick Start

```bash
# Install dependencies
make webapp-install

# Start development server
make webapp-dev

# Or simply
make dev
```

Visit http://localhost:3000 to start using TermAI Explorer.

## Environment Setup

Copy `.env.example` to `.env` and configure:

```bash
ANTHROPIC_API_KEY=sk-ant-api03-...
NEXT_PUBLIC_WEBAPP_URL=http://localhost:3000
OLLAMA_BASE_URL=http://localhost:11434
FILEDB_PATH=./filedb
```


## Architecture

### Directory Structure
```
webapp/
├── app/                    # Next.js app directory
│   ├── api/               # API routes
│   │   ├── chat/          # Claude proxy with streaming
│   │   ├── session/       # Session management
│   │   └── rag/           # RAG system
│   ├── layout.tsx         # Root layout
│   ├── page.tsx           # Main terminal page
│   └── globals.css        # Global styles
├── components/            # React components
│   ├── terminal/          # Terminal UI
│   ├── visualizations/    # Chart/table components
│   └── ui/                # Generic UI components
├── lib/                   # Utilities
│   ├── claude.ts          # Claude API wrapper
│   ├── storage.ts         # localStorage wrapper
│   └── viz-parser.ts      # Visualization parser
├── store/                 # State management
│   └── useTerminalStore.ts
└── types/                 # TypeScript types
```

### Data Storage
```
filedb/webapp/
├── sessions/{session_id}.json       # Session metadata
├── conversations/{session_id}/      # Conversation history
│   └── {timestamp}.json
└── cache/embeddings.json           # Cached embeddings (Phase 2)
```

## API Endpoints

### POST /api/chat
Send a message and receive streaming response.

**Request:**
```json
{
  "message": "What can you do?",
  "session_id": "uuid"
}
```

**Response:** Server-Sent Events stream

### GET /api/session?action=create
Create a new session.

**Response:**
```json
{
  "session_id": "uuid"
}
```

### GET /api/session?action=validate&id={uuid}
Validate an existing session.

**Response:**
```json
{
  "valid": true
}
```

### POST /api/rag/store
Store a message for RAG retrieval.

**Request:**
```json
{
  "session_id": "uuid",
  "message": {
    "role": "user",
    "content": "...",
    "timestamp": "..."
  }
}
```

### GET /api/rag/query?session_id={uuid}&query={text}&limit={n}
Retrieve relevant conversation context.

**Response:**
```json
{
  "context": "...",
  "sources": [...]
}
```

## Development

### State Management
Uses Zustand for global state:
- Session ID management
- Message history
- Loading states
- Command history


### Error Handling
- ErrorBoundary catches component errors
- Graceful degradation when RAG fails
- Retry logic for API failures

## Phase 2 Plans

- [ ] ChromaDB integration for semantic search
- [ ] Ollama integration for local embeddings
- [ ] Advanced chart types (scatter, area)
- [ ] Export conversations to markdown
- [ ] Multi-session support
- [ ] Custom theme configuration

## Troubleshooting

### Port already in use
```bash
lsof -ti:3000 | xargs kill -9
```

### Clear session data
```bash
rm -rf filedb/webapp/sessions/*
rm -rf filedb/webapp/conversations/*
```

### Claude API errors
Check your API key in `.env` and ensure you have credits available.

## License

ISC
